<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Treatment Effect Estimates | AME Lab</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Treatment Effect Estimates" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Treatment Effect Estimates" /> <meta property="og:description" content="Treatment Effect Estimates" /> <link rel="canonical" href="http://localhost:4000/documentation/user-guide/Treatment-Effects" /> <meta property="og:url" content="http://localhost:4000/documentation/user-guide/Treatment-Effects" /> <meta property="og:site_name" content="AME Lab" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-10-25T15:10:08-05:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/documentation/user-guide/Treatment-Effects","datePublished":"2020-10-25T15:10:08-05:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/documentation/user-guide/Treatment-Effects"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/content/logos/logo.svg"}},"headline":"Treatment Effect Estimates","description":"Treatment Effect Estimates","dateModified":"2020-10-25T15:10:08-05:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">DAME-FLAME Python Package</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/getting-started" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation" class="nav-list-link">Documentation</a><ul class="nav-list "><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation/user-guide/" class="nav-list-link">User Guide</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/documentation/user-guide/Introduction" class="nav-list-link">Introduction</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/user-guide/Getting-Matches" class="nav-list-link">Getting Matches</a> </li><li class="nav-list-item active"> <a href="http://localhost:4000/documentation/user-guide/Treatment-Effects" class="nav-list-link active">Treatment Effect Estimates</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/user-guide/Missing-Data" class="nav-list-link">Missing Data Handling</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/documentation/user-guide/Algorithm-Controls" class="nav-list-link">Algorithm Controls</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/documentation/api-documentation/" class="nav-list-link">API Documentation</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/documentation/api-documentation/Introduction" class="nav-list-link">Introduction</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/examples/example-1/" class="nav-list-link">Example 1</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AME Lab" aria-label="Search AME Lab" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly" class="site-button" target="_blank" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/documentation">Documentation</a></li> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/documentation/user-guide/">User Guide</a></li> <li class="breadcrumb-nav-list-item"><span>Treatment Effect Estimates</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="treatment-effect-estimates"> <a href="#treatment-effect-estimates" class="anchor-heading" aria-labelledby="treatment-effect-estimates"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Treatment Effect Estimates </h1> <p>We define and discuss the most common metrics that researchers estimate when evaluating the results of a treatment.</p> <p>As an important note, these metrics will be biased if the unconfoundedness or ignorability assumption does not hold. In other words, it is best to use these metrics if the outcome is independent of the treatment when observable covaraiates are held constant. The bias will be as small as possible if many covariates are included, or users include any covariate that would have an impact on the outcome.</p> <p>In a case where a user is conflicted on whether or not to include particular covariates, we provide an example here (todo: provide link) where the user includes all variables, and is able to eliminate weakly correlated covariates quickly and continue matching on only the most relevant ones. We recommend this approach, in order to ensure that any important covariates are matched on and bias of these estimators is minimized.</p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#standard-notation-and-statistical-definitions" id="markdown-toc-standard-notation-and-statistical-definitions">Standard Notation and Statistical Definitions</a></li> <li><a href="#average-treatment-effect-ate" id="markdown-toc-average-treatment-effect-ate">Average Treatment Effect (ATE)</a></li> <li><a href="#average-treatment-effect-on-treated-att" id="markdown-toc-average-treatment-effect-on-treated-att">Average Treatment Effect on Treated (ATT)</a></li> <li><a href="#conditional-average-treatment-effect-cate" id="markdown-toc-conditional-average-treatment-effect-cate">Conditional Average Treatment Effect (CATE)</a> <ol> <li><a href="#further-reference" id="markdown-toc-further-reference">Further Reference</a></li> </ol> </li> </ol> </details> <h2 id="standard-notation-and-statistical-definitions"> <a href="#standard-notation-and-statistical-definitions" class="anchor-heading" aria-labelledby="standard-notation-and-statistical-definitions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Standard Notation and Statistical Definitions </h2> <p>We say there are $i$ units or observations. These are the individuals being observed in the study. There are $n$ individuals in total.</p> <p>There are $r$ covariates upon which we have observed characteristics about each of the individuals prior to treatment, and these are $x_1$ through $x_r$. For a given unit $i$, its vector of covariates is $X_i$</p> <p>Let the treatment indicator for any unit $i$ be indicated as $T_i$.</p> <p>We let $Y_i$ be the outcome for individual $i$. We use this interchangably with the notation $Y_i(T_i)$, so we write $Y_i(0)$ to indicate the outcome of $i$ if $i$ is in the control group, and $Y_i(1)$ if $i$ is in the treated group.</p> <p>Lastly, we introduce notation for the matched group of a unit $i$. Supposed unit $i$ belongs in matched group $M$. We define the set of units in the opposite treatment group that unit $i$ is matched to as $\mathbb{J}_M(i)={\ell_1(i), …\ell_M(i)}$</p> <h2 id="average-treatment-effect-ate"> <a href="#average-treatment-effect-ate" class="anchor-heading" aria-labelledby="average-treatment-effect-ate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Average Treatment Effect (ATE) </h2> <p>The Average Treatment Effect for a population would be $\mathbb{E}[Y(1)-Y(0)]$.</p> <p>We estimate this for a sample as $\frac{1}{N}\sum_{i=1}^{N}[Y_i(1)-Y_i(0)]$. Since we only observe either $Y_i(1)$ or $Y_i(0)$ for each individual, the other is estimated from a unit’s matched group. The imputed potential outcome is thus:</p> \[\hat{Y}_i(0) = \begin{cases} Y_i &amp; \text{if $T_i=0$} \\ \frac{1}{M}\sum_{j\in\mathbb{J}_M(i)}Y_j &amp; \text{if $T_i=1$} \\ \end{cases}\] <p>and</p> \[\hat{Y}_i(1) = \begin{cases} Y_i &amp; \text{if $T_i=1$} \\ \frac{1}{M}\sum_{j\in\mathbb{J}_M(i)}Y_j &amp; \text{if $T_i=0$} \\ \end{cases}\] <p>So finally, the ATE is estimated as $\frac{1}{N}\sum_{i=1}^{N}[\hat{Y}_i(1)-\hat{Y}_i(0)]$</p> <h2 id="average-treatment-effect-on-treated-att"> <a href="#average-treatment-effect-on-treated-att" class="anchor-heading" aria-labelledby="average-treatment-effect-on-treated-att"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Average Treatment Effect on Treated (ATT) </h2> <p>The ATT is simply the ATE on exclusively treated units. Let $N_T=\sum_{i=1}^{N}W_i$. This is the number of treated units in the dataset.</p> <p>Formally, we estimate it similarly to the ATE described above, and it becomes: $\frac{1}{N_T}\sum_{i:T_i=1}[\hat{Y}_i(1)-\hat{Y}_i(0)]$</p> <h2 id="conditional-average-treatment-effect-cate"> <a href="#conditional-average-treatment-effect-cate" class="anchor-heading" aria-labelledby="conditional-average-treatment-effect-cate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conditional Average Treatment Effect (CATE) </h2> <p>This is defined as the ATE conditional on particular covariates. In the DAME and FLAME algorithms, because each unit is not matched on all covariates, we provide an implementation of CATE that allows a user to input a unit $i$, and then will output the CATE based on the covariates that $i$ was matched on.</p> <p>Formally, CATE is \(\frac{1}{N}\sum_{i=1}^N\mathbb{E}[Y(1)-Y(0)\|X_i]\)</p> <p>Since our units are each matched in a group with other units that share treatment indicator as well as the opposite indicator, each unit in a matched group will have the same CATE. For a unit $i$ in matched group $M$ of size $m$, the CATE of $i$ is thus estimated as: \(\frac{1}{m}\sum_{i:T_i=1}[\hat{Y}_i(1)]-\frac{1}{m}\sum_{i:T_i=0}[\hat{Y}_i(0)]\)</p> <h6 id="further-reference"> <a href="#further-reference" class="anchor-heading" aria-labelledby="further-reference"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> <a href="#header-6"></a>Further Reference </h6> <p>For further reference on treatment effects, see <a href="https://www.mitpressjournals.org/doi/pdfplus/10.1162/003465304323023651?casa_token=fkH1Z_M2FG4AAAAA:MC8V9YAzYAn9YeT4cVvHQF0ZL12QsL8ZVFDX4juiQysLG5auaWyxdSzVrKINkH8nXwlN4P2r0wRq">Imbens, Guido W. “Nonparametric estimation of average treatment effects under exogeneity: A review.” </a>.</p> <hr> <h2 class="text-delta">Table of contents</h2> <ul> </ul> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
