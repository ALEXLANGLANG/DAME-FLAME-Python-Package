<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="/DAME-FLAME-Python-Package/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/DAME-FLAME-Python-Package/assets/css/just-the-docs-default.css"> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="/DAME-FLAME-Python-Package/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.6.1 --> <title>Treatment Effect Estimates | AME Lab</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Treatment Effect Estimates" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Treatment Effect Estimates" /> <meta property="og:description" content="Treatment Effect Estimates" /> <link rel="canonical" href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects" /> <meta property="og:url" content="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects" /> <meta property="og:site_name" content="AME Lab" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2020-11-11T15:39:00-06:00" /> <script type="application/ld+json"> {"@type":"BlogPosting","url":"http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects","datePublished":"2020-11-11T15:39:00-06:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://localhost:4000/DAME-FLAME-Python-Package/content/logos/logo.svg"}},"headline":"Treatment Effect Estimates","description":"Treatment Effect Estimates","dateModified":"2020-11-11T15:39:00-06:00","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="http://localhost:4000/DAME-FLAME-Python-Package/" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <div class="nav-category">DAME-FLAME Python Package</div> <ul class="nav-list"><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/" class="nav-list-link">Home</a></li><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/getting-started" class="nav-list-link">Getting Started</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide" class="nav-list-link">User Guide</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Introduction" class="nav-list-link">Introduction to Causal Inference</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/to-match-or-not" class="nav-list-link">Whether to use Matching</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/data-requirements" class="nav-list-link">Discrete Observation Requirement</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/documentation/user-guide/Getting-Matches" class="nav-list-link">Getting Matches</a></li><li class="nav-list-item active"><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Treatment-Effects" class="nav-list-link active">Treatment Effect Estimates</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Algorithm-Controls" class="nav-list-link">Algorithm Controls</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide/Missing-Data" class="nav-list-link">Missing Data Handling</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation" class="nav-list-link">API Documentation</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/DAME" class="nav-list-link">DAME</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/FLAME" class="nav-list-link">FLAME</a></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/" class="nav-list-link">Post Processing</a><ul class="nav-list"><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/matched-group" class="nav-list-link">Matched Group</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATE" class="nav-list-link">ATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/CATE" class="nav-list-link">CATE</a> </li><li class="nav-list-item "> <a href="http://localhost:4000/DAME-FLAME-Python-Package/api-documentation/post-processing/ATT" class="nav-list-link">ATT</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples" class="nav-list-link">Examples</a><ul class="nav-list "><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/flame_vs_dame_quality/" class="nav-list-link">Comparing DAME and FLAME</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/early_stopping/" class="nav-list-link">Benefit to Early Stopping</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/exact_matching/" class="nav-list-link">Exact Matching Only</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/interpretability/" class="nav-list-link">Interpreting Covariate Importance</a></li><li class="nav-list-item "><a href="http://localhost:4000/DAME-FLAME-Python-Package/examples/natality_experiment/" class="nav-list-link">Natality Experiment</a></li></ul></li><li class="nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/FAQ" class="nav-list-link">FAQ and Vocabulary Guide</a></li></ul> </nav> <footer class="site-footer"> This package is created by the <a href="https://almost-matching-exactly.github.io">Almost Matching Exactly Lab</a>. Our site is based on the Jekyll theme <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search AME Lab" aria-label="Search AME Lab" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://github.com/almost-matching-exactly" class="site-button" rel="noopener noreferrer" > GitHub </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="http://localhost:4000/DAME-FLAME-Python-Package/user-guide">User Guide</a></li> <li class="breadcrumb-nav-list-item"><span>Treatment Effect Estimates</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h1 class="no_toc" id="treatment-effect-estimates"> <a href="#treatment-effect-estimates" class="anchor-heading" aria-labelledby="treatment-effect-estimates"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Treatment Effect Estimates </h1> <p>We define and discuss the most common metrics that researchers estimate when evaluating the results of a treatment.</p> <details open=""> <summary class="text-delta"> Table of contents </summary> <ol id="markdown-toc"> <li><a href="#notes-on-statistical-assumptions" id="markdown-toc-notes-on-statistical-assumptions">Notes on Statistical Assumptions</a> <ol> <li><a href="#unconfoundedness" id="markdown-toc-unconfoundedness">Unconfoundedness</a></li> <li><a href="#overlap-of-treatment-and-control-groups" id="markdown-toc-overlap-of-treatment-and-control-groups">Overlap of Treatment and Control Groups</a></li> </ol> </li> <li><a href="#standard-notation-for-statistical-definitions" id="markdown-toc-standard-notation-for-statistical-definitions">Standard Notation for Statistical Definitions</a></li> <li><a href="#conditional-average-treatment-effect-cate" id="markdown-toc-conditional-average-treatment-effect-cate">Conditional Average Treatment Effect (CATE)</a></li> <li><a href="#average-treatment-effect-ate" id="markdown-toc-average-treatment-effect-ate">Average Treatment Effect (ATE)</a></li> </ol> </details> <h2 id="notes-on-statistical-assumptions"> <a href="#notes-on-statistical-assumptions" class="anchor-heading" aria-labelledby="notes-on-statistical-assumptions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Notes on Statistical Assumptions </h2> <h3 id="unconfoundedness"> <a href="#unconfoundedness" class="anchor-heading" aria-labelledby="unconfoundedness"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Unconfoundedness </h3> <p>As an important note, these metrics will be biased if the unconfoundedness or ignorability assumption does not hold. In other words, it is best to use these metrics if the outcome is independent of the treatment when observable covaraiates are held constant. The bias will be as small as possible if many covariates are included, or users include any covariate that would have an impact on the outcome.</p> <p>In a case where a user is conflicted on whether or not to include a particular covariates, we recommend users consider including all variables and performing a match, while observing how quickly in the algorithm that covariate is dropped with the <code class="language-plaintext highlighter-rouge">verbose=3</code> parameter. If the covariate is dropped in an early iteration with a low predictive error, it can be assumed that covariate is only weakly correlated with the outcome. Users can then perform a match a second time after removing weakly correlated covariates from their dataset if they wish. We recommend this approach, in order to ensure that any important covariates are matched on and bias of these estimators is minimized.</p> <h3 id="overlap-of-treatment-and-control-groups"> <a href="#overlap-of-treatment-and-control-groups" class="anchor-heading" aria-labelledby="overlap-of-treatment-and-control-groups"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Overlap of Treatment and Control Groups </h3> <p>A common problem in causal inference is overlap or imbalance between treatment and control groups. A treatment and control group would have no overlap if none of the covariates have the same values. In this case, the FLAME and DAME algorithms would not find any matches, and no treatment effect estimates would be possible.</p> <p>A more moderate issue is partial overlap. In this case, some units do not have matches. Because the <code class="language-plaintext highlighter-rouge">DAME-FLAME</code> package allows for algorithm controls, even if all units could be matched in theory, users of the algorithm might prefer to avoid matching all units. Regardless of the cause, units that are unmatched do not have a CATE estimate, and they are not included in the ATE calculations either.</p> <h2 id="standard-notation-for-statistical-definitions"> <a href="#standard-notation-for-statistical-definitions" class="anchor-heading" aria-labelledby="standard-notation-for-statistical-definitions"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Standard Notation for Statistical Definitions </h2> <p>We refer to each matched unit as unit $i$. There are there are $N$ matched unit in total. We may interchangeably refer to the matched units as ‘individuals’ or ‘observations’, and although we will not always preface by saying they are ‘matched units’, please remember that they must be in order to be included in treatment effects.</p> <p>There are $r$ covariates upon which we have observed characteristics about each of the individuals prior to treatment, and these are $x_1$ through $x_r$. For a given unit $i$, its vector of covariates is $X_i$</p> <p>Let the treatment indicator for any unit $i$ be indicated as $T_i$.</p> <p>We let $Y_i$ be the outcome for individual $i$. We use this interchangably with the notation $Y_i(T_i)$, so we write $Y_i(0)$ to indicate the outcome of $i$ if $i$ is in the control group, and $Y_i(1)$ if $i$ is in the treated group.</p> <p>Lastly, we introduce notation for the matched grous. We label a matched group as $m$. The size of a matched group is $| m\vert$, and this is the number of units in the group. There are $M$ matched groups in total.</p> <h2 id="conditional-average-treatment-effect-cate"> <a href="#conditional-average-treatment-effect-cate" class="anchor-heading" aria-labelledby="conditional-average-treatment-effect-cate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Conditional Average Treatment Effect (CATE) </h2> <p>This is defined as the average treatment effect conditional on particular covariates. We provide an implementation of CATE that allows a user to input a unit $i$, and then will output the CATE based on the covariates that $i$ was matched on.</p> <p>Formally, CATE for covariates $X_i$ is $\frac{1}{N}\sum_{i=1}^N\mathbb{E}[Y(1)-Y(0)|X_i]$</p> <p>Since our units are each matched in a group with other units that share treatment indicator as well as the opposite indicator, each unit in a matched group will have the same CATE. For a unit $i$ in matched group $M$ of size $||M||$, we estimate the CATE of $i$ as: \(\frac{1}{\|M\|}\sum_{i:T_i=1}[\hat{Y}_i(1)]-\frac{1}{\|M\|}\sum_{i:T_i=0}[\hat{Y}_i(0)]\)</p> <h2 id="average-treatment-effect-ate"> <a href="#average-treatment-effect-ate" class="anchor-heading" aria-labelledby="average-treatment-effect-ate"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Average Treatment Effect (ATE) </h2> <p>The Average Treatment Effect for a population is generally $\mathbb{E}[Y(1)-Y(0)]$.</p> <p>We estimate this in a way that is robust to units reappearing in matched groups, according to the parameter <code class="language-plaintext highlighter-rouge">repeats=True</code>. Our estimate will ensure that units appearing in multiple matched groups are weighted accordingly, as well as that their influence in their groups is accounted for.</p> <p>Let $q_i$ denote the number of matched groups that unit $i$ appears in. Then, for a given matched group $m$, the number of matches made by the units in $m$ is $w_m=\sum_{i=1}^{|m|}\frac{1}{q_i}$. Since the CATE of each unit in a group is the same, we can call the CATE of group $m$ $\mathit{CATE}_m$.</p> <p>So, finally, we estimate ATE as $\frac{\sum_{m\in\mathbb{M}}CATE_m*w_m}{\sum_{m\in\mathbb{M}}w_m}$</p> <div class="language-markdown highlighter-rouge"> <h4> Further Readings </h4> <br /> For more information on treatment effects, we recommend <a href="https://www.mitpressjournals.org/doi/pdfplus/10.1162/003465304323023651?casa_token=fkH1Z_M2FG4AAAAA:MC8V9YAzYAn9YeT4cVvHQF0ZL12QsL8ZVFDX4juiQysLG5auaWyxdSzVrKINkH8nXwlN4P2r0wRq"> Imbens, Guido W. <i>Nonparametric estimation of average treatment effects under exogeneity: A review</i>. </a> </div> </div> </div> <div class="search-overlay"></div> </div> </body> </html> <script type="text/x-mathjax-config"> MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']], processEscapes: true } }); </script> <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
